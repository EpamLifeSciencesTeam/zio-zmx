<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Prometheus Example · ZIO ZMX</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## The ZMX Prometheus example"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Prometheus Example · ZIO ZMX"/><meta property="og:type" content="website"/><meta property="og:url" content="https://zio.github.io/zio-zmx/"/><meta property="og:description" content="## The ZMX Prometheus example"/><meta property="og:image" content="https://zio.github.io/zio-zmx/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://zio.github.io/zio-zmx/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/zio-zmx/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100,"cornerOffset":100}
          )
        });
        </script><script src="/zio-zmx/js/scrollSpy.js"></script><link rel="stylesheet" href="/zio-zmx/css/main.css"/><script src="/zio-zmx/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/zio-zmx/"><img class="logo" src="/zio-zmx/img/navbar_brand2x.png" alt="ZIO ZMX"/><h2 class="headerTitleWithLogo">ZIO ZMX</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/zio-zmx/docs/overview/overview_index" target="_self">Overview</a></li><li class="siteNavGroupActive"><a href="/zio-zmx/docs/metrics/metrics_index" target="_self">Metrics</a></li><li class=""><a href="/zio-zmx/docs/usecases/usecases_index" target="_self">Use Cases</a></li><li class=""><a href="/zio-zmx/docs/about/about_index" target="_self">About</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Metrics</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Metrics</h3><ul class=""><li class="navListItem"><a class="navItem" href="/zio-zmx/docs/metrics/metrics_index">Metrics</a></li><li class="navListItem"><a class="navItem" href="/zio-zmx/docs/metrics/metrics_statsd">StatsD Example</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/zio-zmx/docs/metrics/metrics_prometheus">Prometheus Example</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Prometheus Example</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="the-zmx-prometheus-example"></a><a href="#the-zmx-prometheus-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The ZMX Prometheus example</h2>
<p>To demonstrate the unified ZMX reporting API we will use the example below which uses only ZMX defined methods
to capture some metrics.</p>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">InstrumentedSample</span> </span>{

  <span class="hljs-comment">// Count something explicitly</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> doSomething = <span class="hljs-type">ZMX</span>.count(<span class="hljs-string">"myCounter"</span>, <span class="hljs-number">1.0</span>d, <span class="hljs-string">"effect"</span> -&gt; <span class="hljs-string">"count1"</span>)

  <span class="hljs-comment">// Manipulate an arbitrary Gauge</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> gaugeSomething = <span class="hljs-keyword">for</span> {
    v1 &lt;- nextDoubleBetween(<span class="hljs-number">0.0</span>d, <span class="hljs-number">100.0</span>d)
    v2 &lt;- nextDoubleBetween(<span class="hljs-number">-50</span>d, <span class="hljs-number">50</span>d)
    _  &lt;- <span class="hljs-type">ZMX</span>.gauge(<span class="hljs-string">"setGauge"</span>, v1)
    _  &lt;- <span class="hljs-type">ZMX</span>.gaugeChange(<span class="hljs-string">"changeGauge"</span>, v2)
  } <span class="hljs-keyword">yield</span> ()

  <span class="hljs-comment">// Use a convenient extension to count the number of executions of an effect</span>
  <span class="hljs-comment">// In this particular case count how often the gauge has been set</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">lazy</span> <span class="hljs-keyword">val</span> doSomething2 = gaugeSomething.counted(<span class="hljs-string">"myCounter"</span>, <span class="hljs-string">"effect"</span> -&gt; <span class="hljs-string">"count2"</span>)

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">program</span></span>: <span class="hljs-type">ZIO</span>[<span class="hljs-type">ZEnv</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">ExitCode</span>] = <span class="hljs-keyword">for</span> {
    _ &lt;- doSomething.schedule(<span class="hljs-type">Schedule</span>.spaced(<span class="hljs-number">100.</span>millis)).forkDaemon
    _ &lt;- doSomething2.schedule(<span class="hljs-type">Schedule</span>.spaced(<span class="hljs-number">200.</span>millis)).forkDaemon
  } <span class="hljs-keyword">yield</span> <span class="hljs-type">ExitCode</span>.success
}
</code></pre>
<p>We have 2 counters which differ only in the value of the <code>effect</code> label, but otherwise refer to the same name. The counter
labeled <code>count1</code> is incremented explicitly, while the counter labeled <code>count2</code> will count the number of executions of
<code>gaugeSomething</code>.</p>
<p>We also have two gauges, one of which is regularly set to an absolute value while the other is modified with a random delta.</p>
<p>The <code>program</code> effect simply kicks off the effects simulating the metrics. The mainline of the programm should have some
logic to terminate, either time or event based.</p>
<h3><a class="anchor" aria-hidden="true" id="a-mainline-for-the-prometheus-instrumentation"></a><a href="#a-mainline-for-the-prometheus-instrumentation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A mainline for the Prometheus instrumentation.</h3>
<p>In order to have a working example, we need to provide a mainline which executes the <code>program</code> and uses the <code>report</code>
effect of the prometheus instrumentation to provide an HTTP endpoint serving the premetheus encoded metrics.</p>
<p>In our example we are using <a href="https://github.com/polynote/uzhttp">uzhttp</a> for its simplicity.</p>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">PrometheusInstrumentedApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ZmxApp</span> <span class="hljs-keyword">with</span> <span class="hljs-title">InstrumentedSample</span> </span>{

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> bindHost = <span class="hljs-string">"127.0.0.1"</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> bindPort = <span class="hljs-number">8080</span>

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> demoQs: <span class="hljs-type">Seq</span>[<span class="hljs-type">Quantile</span>] =
    <span class="hljs-number">1.</span>to(<span class="hljs-number">9</span>).map(i =&gt; i / <span class="hljs-number">10</span>d).map(d =&gt; <span class="hljs-type">Quantile</span>(d, <span class="hljs-number">0.03</span>)).collect { <span class="hljs-keyword">case</span> <span class="hljs-type">Some</span>(q) =&gt; q }

  <span class="hljs-comment">// For all histograms set the buckets to some linear slots</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> cfg                   = <span class="hljs-type">PrometheusConfig</span>(
    <span class="hljs-comment">// Use a linear bucket scale for all histograms</span>
    buckets = <span class="hljs-type">Chunk</span>(_ =&gt; <span class="hljs-type">Some</span>(<span class="hljs-type">PMetric</span>.<span class="hljs-type">Buckets</span>.<span class="hljs-type">Linear</span>(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>))),
    <span class="hljs-comment">// Use the demo Quantiles for all summaries</span>
    quantiles = <span class="hljs-type">Chunk</span>(_ =&gt; <span class="hljs-type">Some</span>(demoQs))
  )

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">makeInstrumentation</span> </span>= <span class="hljs-type">PrometheusRegistry</span>.make(cfg).map(r =&gt; <span class="hljs-keyword">new</span> <span class="hljs-type">PrometheusInstrumentaion</span>(r))

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">runInstrumented</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>], inst: <span class="hljs-type">Instrumentation</span>): <span class="hljs-type">ZIO</span>[<span class="hljs-type">ZEnv</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">ExitCode</span>] =
    (<span class="hljs-keyword">for</span> {
      _ &lt;- <span class="hljs-type">Server</span>
             .builder(<span class="hljs-keyword">new</span> <span class="hljs-type">InetSocketAddress</span>(bindHost, bindPort))
             .handleSome {
               <span class="hljs-keyword">case</span> req <span class="hljs-keyword">if</span> req.uri.getPath() == <span class="hljs-string">"/"</span>      =&gt;
                 <span class="hljs-type">ZIO</span>.succeed(<span class="hljs-type">Response</span>.html(<span class="hljs-string">"&lt;html&gt;&lt;title&gt;Simple Server&lt;/title&gt;&lt;a href=\"/metrics\"&gt;Metrics&lt;/a&gt;&lt;/html&gt;"</span>))
               <span class="hljs-keyword">case</span> req <span class="hljs-keyword">if</span> req.uri.getPath == <span class="hljs-string">"/metrics"</span> =&gt;
                 inst.report.map(r =&gt; <span class="hljs-type">Response</span>.plain(r.getOrElse(<span class="hljs-string">""</span>)))
             }
             .serve
             .use(s =&gt; s.awaitShutdown)
             .fork
      _ &lt;- putStrLn(<span class="hljs-string">"Press Enter"</span>)
      _ &lt;- program.fork
      f &lt;- getStrLn.fork
      _ &lt;- f.join.catchAll(_ =&gt; <span class="hljs-type">ZIO</span>.none)
    } <span class="hljs-keyword">yield</span> <span class="hljs-type">ExitCode</span>.success)
}
</code></pre>
<p>We are serving the root path, which simply provides a link to the metrics route. The metrics route uses the instrumentation
to produce the document and return it as HTTP response to the caller.</p>
<h2><a class="anchor" aria-hidden="true" id="running-the-prometheus-example"></a><a href="#running-the-prometheus-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running the prometheus example</h2>
<p>Any of the examples can be run from a command line within the ZMX checkout directory with</p>
<pre><code class="hljs">sbt examples/<span class="hljs-keyword">run</span><span class="bash">
</span></code></pre>
<p>Out of the choices, select the option corresponding to <code>zio.zmx.PrometheusInstrumentedApp</code>.</p>
<p>If everything works, we should be able to use a web browser to go to <code>http://localhost:8080/metrics</code> and should see something like</p>
<pre><code class="hljs"><span class="hljs-meta"># TYPE myCounter counter</span>
<span class="hljs-meta"># HELP myCounter</span>
myCounter{effect=<span class="hljs-string">"count2"</span>} <span class="hljs-number">46.0</span> <span class="hljs-number">1608982756235</span>
<span class="hljs-meta"># TYPE setGauge gauge</span>
<span class="hljs-meta"># HELP setGauge</span>
setGauge <span class="hljs-number">8.66004641453435</span> <span class="hljs-number">1608982756235</span>
<span class="hljs-meta"># TYPE changeGauge gauge</span>
<span class="hljs-meta"># HELP changeGauge</span>
changeGauge <span class="hljs-number">90.7178906485008</span> <span class="hljs-number">1608982756235</span>
<span class="hljs-meta"># TYPE myCounter counter</span>
<span class="hljs-meta"># HELP myCounter</span>
myCounter{effect=<span class="hljs-string">"count1"</span>} <span class="hljs-number">92.0</span> <span class="hljs-number">1608982756235</span>
</code></pre>
<p>Once we see the metrics being served from our example, we can set up Prometheus and Grafana to create a simple dashboard displaying
our metrics.</p>
<h2><a class="anchor" aria-hidden="true" id="simple-prometheus-setup"></a><a href="#simple-prometheus-setup" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Simple Prometheus setup</h2>
<p>The following steps have been tested on Ubuntu 18.04 running inside the Windows Subsystem for Linux. Essentially, you need to
download the prometheus binaries for your environment and start the server with our sample configuration.</p>
<p>In addition, you need to download the Grafana binaries for your installation and configure prometheus as a single datasource.</p>
<p>Finally, you can import our example dashboard at 'examples/prometheus/ZmxDashboard.json` and enjoy the results.</p>
<hr>
<p><strong>NOTE</strong></p>
<p>These steps are not intended to replace the Prometheus or Grafana documentation. Please refer to their web sites for guidelines
towards a more sophisticated setup or an installation on different platforms.</p>
<hr>
<h3><a class="anchor" aria-hidden="true" id="download-and-configure-prometheus"></a><a href="#download-and-configure-prometheus" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Download and configure Prometheus</h3>
<p>In the steps below the ZMX checkout directory will be referred to as <code>$ZMXDIR</code>.</p>
<ol>
<li><a href="https://github.com/prometheus/prometheus/releases/download/v2.23.0/prometheus-2.23.0.linux-amd64.tar.gz">Download</a> prometheus</li>
<li>Extract the downloaded archive to a directory of your choice, this will be referred to as <code>$PROMDIR</code>.</li>
<li>Within <code>$PROMDIR</code> execute
<pre><code class="hljs">./prometheus --config<span class="hljs-selector-class">.file</span> <span class="hljs-variable">$ZMXDIR</span>/examples/prometheus/promcfg<span class="hljs-selector-class">.yml</span>
</code></pre>
This will start the prometheus server which regularly polls the HTTP endpoint of the example above for its metrics.</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="download-and-configure-grafana"></a><a href="#download-and-configure-grafana" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Download and configure Grafana</h3>
<ol>
<li><p><a href="https://dl.grafana.com/oss/release/grafana-7.3.6.linux-amd64.tar.gz">Download</a> grafana</p></li>
<li><p>Extract the downloaded archive to a directory of your choice, this will be referred to as <code>$GRAFANADIR</code>.</p></li>
<li><p>Within <code>$GRAFANADIR</code> execute</p>
<pre><code class="hljs">./<span class="hljs-keyword">bin/grafana-server
</span></code></pre>
<p>This will start a the Grafana server.</p></li>
<li><p>Now you should be able to login to Grafana at <code>http://localhost:3000' with the default user</code>admin<code>with the default password</code>admin`.</p>
<p>Upon the first login you will be asked to change the default password.</p></li>
<li><p>Within the Grafana menu on the left hand side you will find <code>Manage Dashboards</code> within that page, select <code>Import</code>.</p></li>
<li><p>You can now either install a dashboard from grafana.com or use a text field to paste JSON.</p></li>
<li><p>Paste the content of <code>$ZMXDIR/examples/prometheus/ZmxDashboard.json</code> into the text field and select <code>Load</code>.</p>
<p>This will import our dashboard example.</p></li>
<li><p>Now, under <code>Manage Dashboards</code> the just imported ZIO dashboard should be visible.</p></li>
<li><p>Navigate to the dashboard.</p></li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="grafana-dashboard"></a><a href="#grafana-dashboard" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Grafana dashboard</h3>
<p>Here is a screenshot of the Grafana dashboard produced with the setup above.</p>
<p><img src="/zio-zmx/img/ZIOZmx-Grafana.png" alt="A simple Grafana Dashboard"></p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/zio-zmx/docs/metrics/metrics_statsd"><span class="arrow-prev">← </span><span class="function-name-prevnext">StatsD Example</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#the-zmx-prometheus-example">The ZMX Prometheus example</a><ul class="toc-headings"><li><a href="#a-mainline-for-the-prometheus-instrumentation">A mainline for the Prometheus instrumentation.</a></li></ul></li><li><a href="#running-the-prometheus-example">Running the prometheus example</a></li><li><a href="#simple-prometheus-setup">Simple Prometheus setup</a><ul class="toc-headings"><li><a href="#download-and-configure-prometheus">Download and configure Prometheus</a></li><li><a href="#download-and-configure-grafana">Download and configure Grafana</a></li><li><a href="#grafana-dashboard">Grafana dashboard</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/zio-zmx/" class="nav-home"><img src="/zio-zmx/img/sidebar_brand2x.png" alt="ZIO ZMX"/></a><div><h5>GitHub</h5><a class="github-button" href="https://github.com/zio/zio-zmx" data-icon="octicon-star" data-count-href="/zio/zio-zmx/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div><div><h5>Chat with us on Discord</h5><a href="https://discord.gg/2ccFBr4"><img src="/zio-zmx//img/discord.png" width="120" alt="discord"/></a></div><div><h5>Additional resources</h5><a href="/zio-zmx/api/index.html">Scaladoc of zio-zmx</a></div></section><section class="copyright">Copyright © 2021 ZIO Maintainers</section></footer></div></body></html>